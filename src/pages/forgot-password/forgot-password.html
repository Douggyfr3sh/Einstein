<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Forgot Password</ion-title>
  </ion-navbar>
</ion-header>


<ion-content padding class="forgot-password-page">
  <div class="logo">
		<img src="assets/img/forgot-password-logo.jpeg" alt="Ionic logo">
	</div>

  <!-- Submit Email for reset form -->
  <form #resetForm="ngForm">
    <!-- Form input for entering email -->
    <ion-list no-lines>
			<ion-item>
				<ion-label stacked color="primary">Enter Email Address</ion-label>
				<ion-input name="email" type="email" placeholder='Albert@email.com'
        [(ngModel)]="emailAddress" #email="ngModel" required email>
				</ion-input>
			</ion-item>
			<p ion-text color="danger" [hidden]="email.valid || submitted == false" padding-left>
				Email address is required.
			</p>
		</ion-list>
  </form>

  <!-- Submit email reset button -->
  <div padding>
    <button ion-button (click)="sendReset()" type="submit"
    [disabled]="!resetForm.valid" block>
      Send Password Reset Email
  </button>
  </div>

  <!-- Form for entering reset code and new password -->
  <form #resetDetails="ngForm" [hidden]="!resetInProgress">
    <!-- Form input for entering email -->
    <ion-list no-lines>
      <!-- Enter reset code input -->
			<ion-item>
				<ion-label stacked color="primary">Reset Code</ion-label>
				<ion-input name="resetCode" type="number" placeholder='12hrS7'
        [(ngModel)]="pwResetCode" #resetCode="ngModel" required>
				</ion-input>
			</ion-item>

      <!-- Enter new password #1 -->
			<ion-item>
				<ion-label stacked color="primary">Enter new password</ion-label>
				<ion-input name="password1" type="password"
        placeholder='Must be at least 6 characters.'
        [(ngModel)]="password" #password1="ngModel" required>
				</ion-input>
			</ion-item>

      <!-- Enter new password #2 -->
			<ion-item>
				<ion-label stacked color="primary">Enter password again</ion-label>
				<ion-input name="password2" type="password"
        placeholder='Must be at least 6 characters.'
        [(ngModel)]="passwordTwo" #password2="ngModel" required>
				</ion-input>
			</ion-item>

		</ion-list>
  </form>

  <!-- Button to submit new password -->
  <div padding [hidden]="!resetInProgress">
    <button ion-button (click)="setNewPassword()" type="submit"
    [disabled]="(pwResetCode.length !== 6) || !(passwordTwo.length >= 6)
    || (password !== passwordTwo)" block>
      Set New Password
    </button>
  </div>

</ion-content>
